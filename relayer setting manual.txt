-------------------cross-chain relayer setting----------------------------------

* flmainchaind, flstoraged keys list

Alice - fls1nmfejs8r6mt584lm4h00470szx9q4g8ed4un7r
Bob - fls10twpnm0ecc970u4wsu5z0g65mq5qddxc0qxz83
node0 - fls1ry6p23a8aza58phugq8l8estfp7m5w34l8dze5
node1 - fls1d2nvav45gnzxwx2glj068pcc2ed3eam68rcqqk
node2 - fls1f8gwh3l5sg3tm85tkrn0ytrz9lhn4akcfluvy8
node3 - fls13dg6pg02e9hy9yzg6x62dt9nrmw0laqd6n2302
node4 - fls1c7cm6emhndtxje43n40y9wnd7j8de4xuz8xle7
node5 - fls148wfz5gxk6p4ffdm2ypxeae5kc3r9d5fqygmla
node6 - fls1spnlnw82h4u26slvykpa74a49w63nk9d7djd7s
node7 - fls1xsukfe4c9v28cgw58y964d4j74xjvt3s7y36hg
node8 - fls1y9dfff84uc3e8xd4yrh9ppcctyz0aj8fuh5u9r
node9 - fls1dgjph84n8etqg2w3hcqj8yppzusvd5zuxvcswl


* 잔액 쿼리

flmainchaind query bank balances fls1nmfejs8r6mt584lm4h00470szx9q4g8ed4un7r 

flstoraged query bank balances fls1nmfejs8r6mt584lm4h00470szx9q4g8ed4un7r  --node tcp://localhost:26658



1. 니모닉으로 각 체인에 계정 추가 (/.hermes/keys/flmainchain/keyring-test/relayer-flmainchain.json)

(명령어용 환경변수 추가)
HERMES_APP=~/.ignite/apps/hermes/bin/v1.13.1
CONFIG_PATH=~/.ignite/relayer/hermes/flmainchain_flstorage

abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon art

$HERMES_APP --config $CONFIG_PATH keys add --chain flmainchain --mnemonic-file /dev/stdin
$HERMES_APP --config $CONFIG_PATH keys add --chain flstorage --mnemonic-file /dev/stdin



2. 생성된 계정 확인 

$HERMES_APP --config $CONFIG_PATH keys list --chain flmainchain
$HERMES_APP --config $CONFIG_PATH keys list --chain flstorage

-> relayer account : fls1r5v5srda7xfth3hn2s26txvrcrntldjuqs34tt

3. 각 계정에 자금 채우기 

curl -X POST -d '{"address": "fls1r5v5srda7xfth3hn2s26txvrcrntldjuqs34tt", "coins": ["10000000stake"]}' http://localhost:4501/credit

curl -X POST -d '{"address": "fls1r5v5srda7xfth3hn2s26txvrcrntldjuqs34tt", "coins": ["10000000stake"]}' http://localhost:4500/credit



4. 릴레이어 및 헤르메스 시작

$HERMES_APP --config $CONFIG_PATH create channel --a-chain flmainchain --b-chain flstorage --a-port fedlearning --b-port fedstoraging --new-client-connection --channel-version fedlearning-1



$HERMES_APP --config $CONFIG_PATH start



5.1  1라운드 초기화

MEMBERS=$(flmainchaind keys show alice -a),$(flmainchaind keys show bob -a)

echo $MEMBERS



5.2 init-round 트잭 전송

# [MEMBERS 변수]를 사용하여 alice와 bob을 1라운드의 초기 위원으로 설정

flmainchaind tx fedlearning init-round "$MEMBERS" --from alice --node tcp://localhost:26658 -y

-> 확인

flmainchaind query fedlearning show-current-round --node tcp://localhost:26658

flmainchaind query fedlearning show-round 1 --node tcp://localhost:26658



-----------------------------------------------------------------------



-------------------L-node simul------------------------------------



b9be8a5e6612896cf8b84f9e3a2b591858b1e9e47f4bffbab6f9b81be253fe64



오리지널해시 메인체인 보고

flmainchaind tx fedlearning submit-weight 1 b9be8a5e6612896cf8b84f9e3a2b591858b1e9e47f4bffbab6f9b81be253fe64 "1-bob-flstorage" --from fls1p9jqgjchwvue5fdm2ltvcasq5svfpw6k7wufpg --node tcp://localhost:26658 -y





flstoraged tx fedstoraging request-data-access b9be8a5e6612896cf8b84f9e3a2b591858b1e9e47f4bffbab6f9b81be253fe64 --from fls1w2evy6hkh9h807pdlsxmlhcgdrlt0wr0xw6hw6 -y



go run main.go b9be8a5e6612896cf8b84f9e3a2b591858b1e9e47f4bffbab6f9b81be253fe64 ./downloaded_weight_bob.bin





# [alice_mainchain_주소]와 [bob_mainchain_주소]를 채워 넣기

flmainchaind tx fedlearning submit-score 1 fls1vva47v57ke002xn7n3qm43j70rr60mpntangj3 85 --from fls1vva47v57ke002xn7n3qm43j70rr60mpntangj3 --node tcp://localhost:26658 -y







fls1p9jqgjchwvue5fdm2ltvcasq5svfpw6k7wufpg

fls1vva47v57ke002xn7n3qm43j70rr60mpntangj3



flmainchaind tx fedlearning submit-global-model 1 b9be8a5e6612896cf8b84f9e3a2b591858b1e9e47f4bffbab6f9b81be253fa64 --from fls1p9jqgjchwvue5fdm2ltvcasq5svfpw6k7wufpg --node tcp://localhost:26658 -y



flmainchaind query fedlearning show-global-model 1 --node tcp://localhost:26658



